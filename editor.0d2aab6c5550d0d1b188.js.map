{"version":3,"sources":["webpack://sleepy/./editor/AreaType.js","webpack://sleepy/./editor/EditorMap.js","webpack://sleepy/./editor/EditorMapCell.js","webpack://sleepy/./editor/EditorRenderer.js","webpack://sleepy/./editor/EditorWorldGenerator.js","webpack://sleepy/./editor/index.js","webpack://sleepy/./src/utils/Grid.js","webpack://sleepy/./src/utils/rand.js","webpack://sleepy/webpack/bootstrap","webpack://sleepy/webpack/runtime/define property getters","webpack://sleepy/webpack/runtime/hasOwnProperty shorthand","webpack://sleepy/webpack/runtime/make namespace object","webpack://sleepy/webpack/startup"],"names":["AREA_TYPE_WATER","AREA_TYPE_PLAINS","AREA_TYPE_FOREST","AREA_TYPE_DESERT","AREA_TYPE_CANYON","EditorMap","constructor","width","height","this","grid","Grid","x","y","EditorMapCell","serialize","data","type","colorMap","renderEditorMap","display","document","getElementsByClassName","innerHTML","row","createElement","classList","add","area","get","cell","dataset","style","backgroundColor","appendChild","generateWorld","forEach","pickRandom","i","window","addEventListener","e","target","contains","parseInt","console","log","_width","_height","defaultValueGenerator","clear","idx","coord","Math","trunc","size","setAll","value","set","isOutOfBounds","suppressOOBWarn","warn","entries","deserialize","getNeighbors","clearAndResize","arr","floor","random","length","randomInt","min","max","randomBool","randomWeightedBool","weight","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"editor.0d2aab6c5550d0d1b188.js","sourcesContent":["export const AREA_TYPE_WATER = 'AREA_TYPE_WATER';\r\nexport const AREA_TYPE_PLAINS = 'AREA_TYPE_PLAINS';\r\nexport const AREA_TYPE_FOREST = 'AREA_TYPE_FOREST';\r\nexport const AREA_TYPE_DESERT = 'AREA_TYPE_DESERT';\r\nexport const AREA_TYPE_CANYON = 'AREA_TYPE_CANYON';\r\n","import Grid from '../src/utils/Grid'\r\nimport { EditorMapCell } from './EditorMapCell';\r\n\r\nexport class EditorMap {\r\n    constructor(width, height) {\r\n        this.grid = new Grid(width, height, (x, y) => {\r\n            return new EditorMapCell({\r\n                x,\r\n                y\r\n            });\r\n        });\r\n    }\r\n\r\n    serialize() {\r\n        return {};\r\n    }\r\n}\r\n","import { AREA_TYPE_WATER } from './AreaType';\r\n\r\nexport class EditorMapCell {\r\n    constructor(data) {\r\n        this.x = data.x;\r\n        this.y = data.y;\r\n        this.type = data.type || AREA_TYPE_WATER;\r\n    }\r\n\r\n    serialize() {\r\n        return {\r\n            x: this.x,\r\n            y: this.y,\r\n            type: this.type,\r\n        };\r\n    }\r\n}\r\n","const colorMap = {\r\n    AREA_TYPE_PLAINS: '#57723a',\r\n    AREA_TYPE_CANYON: '#804c36',\r\n    AREA_TYPE_DESERT: '#b3904d',\r\n    AREA_TYPE_FOREST: '#3c5837',\r\n    AREA_TYPE_WATER: '#005784'\r\n};\r\n\r\nexport const renderEditorMap = (data) => {\r\n    const display = document.getElementsByClassName('display-grid')[0];\r\n\r\n    display.innerHTML = '';\r\n\r\n    for (let y = 0; y < data.grid.height; y++) {\r\n        const row = document.createElement('div');\r\n\r\n        row.classList.add('display-row');\r\n\r\n        for (let x = 0; x < data.grid.width; x++) {\r\n            const area = data.grid.get(x, y);\r\n            const cell = document.createElement('div');\r\n\r\n            cell.dataset.x = x;\r\n            cell.dataset.y = y;\r\n\r\n            cell.classList.add('display-cell');\r\n\r\n            cell.style.backgroundColor = colorMap[area.type];\r\n\r\n            row.appendChild(cell);\r\n        }\r\n\r\n        display.appendChild(row);\r\n    }\r\n};\r\n","import { pickRandom } from '../src/utils/rand';\r\nimport { AREA_TYPE_CANYON, AREA_TYPE_DESERT, AREA_TYPE_FOREST, AREA_TYPE_PLAINS, AREA_TYPE_WATER } from './AreaType';\r\nimport { EditorMap } from './EditorMap';\r\n\r\nexport const generateWorld = (width, height) => {\r\n    const data = new EditorMap(width, height);\r\n\r\n    data.grid.data.forEach((cell) => {\r\n        cell.type = pickRandom([\r\n            AREA_TYPE_PLAINS,\r\n            AREA_TYPE_CANYON,\r\n            AREA_TYPE_DESERT,\r\n            AREA_TYPE_FOREST,\r\n            AREA_TYPE_WATER,\r\n        ]);\r\n    });\r\n\r\n    for (let i = 0; i < width; i++) {\r\n        data.grid.get(i, 0).type = AREA_TYPE_WATER;\r\n        data.grid.get(i, height - 1).type = AREA_TYPE_WATER;\r\n    }\r\n\r\n    for (let i = 0; i < height; i++) {\r\n        data.grid.get(0, i).type = AREA_TYPE_WATER;\r\n        data.grid.get(width - 1, i).type = AREA_TYPE_WATER;\r\n    }\r\n\r\n    return data;\r\n};\r\n","import { EditorMap } from './EditorMap';\r\nimport { renderEditorMap } from './EditorRenderer';\r\nimport { generateWorld } from './EditorWorldGenerator';\r\n\r\nconst data = generateWorld(32, 24);\r\n\r\nwindow.data = data;\r\n\r\nrenderEditorMap(data);\r\n\r\ndocument.addEventListener('click', (e) => {\r\n    if (e.target.classList.contains('display-cell')) {\r\n        const x = parseInt(e.target.dataset.x);\r\n        const y = parseInt(e.target.dataset.y);\r\n        const cell = data.grid.get(x, y);\r\n\r\n        console.log(cell);\r\n    }\r\n});\r\n","export default class Grid {\r\n    _width = 0;\r\n    _height = 0;\r\n    data = [];\r\n    suppressOOBWarn = false;\r\n    defaultValueGenerator = () => null;\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get size() {\r\n        return this._width * this._height;\r\n    }\r\n\r\n    constructor(width, height, defaultValueGenerator = () => null) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this.defaultValueGenerator = defaultValueGenerator;\r\n\r\n        this.clear();\r\n    }\r\n\r\n    idx(x, y) {\r\n        return y * this._width + x;\r\n    }\r\n\r\n    coord(idx) {\r\n        return {\r\n            x: Math.trunc(idx % this._width),\r\n            y: Math.trunc(idx / this._width),\r\n        };\r\n    }\r\n\r\n    clear() {\r\n        this.data = [];\r\n\r\n        for (let i = 0; i < this.size; i++) {\r\n            const { x, y } = this.coord(i);\r\n\r\n            this.data[i] = this.defaultValueGenerator(x, y, this.idx(x, y));\r\n        }\r\n    }\r\n\r\n    setAll(value) {\r\n        this.data = [];\r\n\r\n        for (let i = 0; i < this.size; i++) {\r\n            this.data[i] = value;\r\n        }\r\n    }\r\n\r\n    set(x, y, value) {\r\n        if (this.isOutOfBounds(x, y)) {\r\n            if (!this.suppressOOBWarn) {\r\n                console.warn(\r\n                    `Trying to set out-of-bounds coordinates (${x}, ${y}) to value ${value}`\r\n                );\r\n            }\r\n            return;\r\n        }\r\n\r\n        const idx = this.idx(x, y);\r\n\r\n        this.data[idx] = value;\r\n    }\r\n\r\n    serialize() {\r\n        const entries = [...this.data];\r\n\r\n        return {\r\n            width: this.width,\r\n            height: this.height,\r\n            entries,\r\n        };\r\n    }\r\n\r\n    deserialize(data) {\r\n        this._width = data.width;\r\n        this._height = data.height;\r\n        this.data = data.entries;\r\n    }\r\n\r\n    get(x, y) {\r\n        if (this.isOutOfBounds(x, y)) {\r\n            return this.defaultValueGenerator();\r\n        }\r\n\r\n        return this.data[this.idx(x, y)];\r\n    }\r\n\r\n    isOutOfBounds(x, y) {\r\n        return x < 0 || y < 0 || x >= this._width || y >= this.height;\r\n    }\r\n\r\n    getNeighbors(x, y) {\r\n        return [\r\n            this.get(x - 1, y - 1), // TOP LEFT\r\n            this.get(x, y - 1), // TOP\r\n            this.get(x + 1, y - 1), // TOP RIGHT\r\n            this.get(x - 1, y), // LEFT\r\n            this.get(x + 1, y), // RIGHT\r\n            this.get(x - 1, y + 1), // BOTTOM LEFT\r\n            this.get(x, y + 1), // BOTTOM\r\n            this.get(x + 1, y + 1), // BOTTOM RIGHT\r\n        ];\r\n    }\r\n\r\n    clearAndResize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this.clear();\r\n    }\r\n}\r\n","export const pickRandom = (arr) => {\r\n    return arr[Math.floor(Math.random() * arr.length)];\r\n};\r\n\r\nexport const randomInt = (min, max) => {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const randomBool = () => {\r\n    return pickRandom([true, false]);\r\n};\r\n\r\nexport const randomWeightedBool = (weight = 0.5) => {\r\n    return Math.random() <= weight;\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(364);\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}